!function e(i,t,n){function r(a,o){if(!t[a]){if(!i[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[a]={exports:{}};i[a][0].call(l.exports,(function(e){return r(i[a][1][e]||e)}),l,l.exports,e,i,t,n)}return t[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,i,t){"use strict";tinymce.PluginManager.add("QAImg",(function(e,i){var t=jQuery(e.getElement()).parent(),n=null,r=document.createElement("input");function s(e,i,r){clearTimeout(n),jQuery("#notice").remove(),t.append('<div id="notice"><div class="notice-bg"></div><div class="notice-wrap"><div class="notice-inner notice-'+e+'">'+i+"</div></div></div>"),r&&(n=setTimeout((function(){jQuery("#notice").remove()}),r))}function a(i,t){var a=new FormData;a.append("upfile",i||r.files[0],t||r.files[0].name),a.append("action","QAPress_img_upload"),jQuery.ajax({type:"POST",url:QAPress_js.ajaxurl,data:a,processData:!1,contentType:!1,dataType:"json",success:function(i,t,r){clearTimeout(n),jQuery("#notice").remove(),"0"==i.result?e.insertContent('<img src="'+i.image.url+'" alt="'+i.image.alt+'">'):s(0,QAPress_js.lang.upload_fail,1200)},error:function(e,i,t){clearTimeout(n),jQuery("#notice").remove(),alert(t)}})}r.setAttribute("type","file"),r.setAttribute("accept","image/*"),r.onchange=function(){var e=this.files[0];if(HTMLCanvasElement&&HTMLCanvasElement.prototype.toBlob&&/\.(jpg|jpeg|png)$/i.test(e.name)){var i=URL.createObjectURL(e),t=new Image;t.src=i,t.onerror=function(){URL.revokeObjectURL(this.src),s(0,QAPress_js.lang.upload_fail,2e3)},t.onload=function(){URL.revokeObjectURL(this.src);var i=t.width,n=t.height;if(QAPress_js.compress_img_size&&QAPress_js.compress_img_size>0&&t.width>QAPress_js.compress_img_size){i=QAPress_js.compress_img_size,n=Math.round(t.height/t.width*i);var r=document.createElement("canvas");r.width=i,r.height=n,r.getContext("2d").drawImage(t,0,0,i,n),r.toBlob((function(i){if(i.size>1024*QAPress_js.max_upload_size*1024)return s(0,QAPress_js.lang.file_size,1500),!1;a(i,e.name.replace(/\.png$/i,".jpg"))}),"image/jpeg",.9)}else{if(e.size>1024*QAPress_js.max_upload_size*1024)return s(0,QAPress_js.lang.file_size,1500),!1;a()}}}else if(e){if(!/\.(gif|jpg|jpeg|png)$/i.test(e.name))return s(0,QAPress_js.lang.file_types,2e3),!1;if(e.size>1024*QAPress_js.max_upload_size*1024)return s(0,QAPress_js.lang.file_size,1500),!1;a(),s(1,'<img class="notice-loading" src="'+QAPress_js.ajaxloading+'"> '+QAPress_js.lang.uploading,0)}},e.addButton("QAImg",{text:"",icon:"image",tooltip:QAPress_js.lang.upload,classes:"qaimg",onclick:function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)||r.click()},onTouchEnd:function(){/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)&&r.click()}})}))},{}]},{},[1]);